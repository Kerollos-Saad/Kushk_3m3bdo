@page
@model IndexModel
@{
	ViewData["Title"] = "Profile";
	ViewData["ActivePage"] = ManageNavPages.Index;
}

<h3>@ViewData["Title"]</h3>
<partial name="_StatusMessage" for="StatusMessage" />

<form id="profile-form" method="post" enctype="multipart/form-data">
	<div class="row">
		<div class="col-md-6">

			<div asp-validation-summary="ModelOnly" class="text-danger" role="alert"></div>
			<div class="form-floating mb-3">
				<input asp-for="Input.FirstName" class="form-control" placeholder="Please choose your firstname." />
				<label asp-for="Input.FirstName" class="form-label"></label>
			</div>
			<div class="form-floating mb-3">
				<input asp-for="Input.LastName" class="form-control" placeholder="Please choose your lastname." />
				<label asp-for="Input.LastName" class="form-label"></label>
			</div>
			<div class="form-floating mb-3">
				<input asp-for="Username" class="form-control" placeholder="Please choose your username." disabled />
				<label asp-for="Username" class="form-label"></label>
			</div>
			<div class="form-floating mb-3">
				<input asp-for="Input.PhoneNumber" class="form-control" placeholder="Please enter your phone number." />
				<label asp-for="Input.PhoneNumber" class="form-label"></label>
				<span asp-validation-for="Input.PhoneNumber" class="text-danger"></span>
			</div>
			<div class="row">
				<div class="col-md-6 mb-3">
					<div class="form-floating">
						<input asp-for="Input.City" class="form-control" placeholder="Please enter your City." />
						<label asp-for="Input.City" class="form-label"></label>
						<span asp-validation-for="Input.City" class="text-danger"></span>
					</div>
				</div>
				<div class="col-md-6 mb-3">
					<div class="form-floating">
						<input asp-for="Input.State" class="form-control" placeholder="Please enter your State." />
						<label asp-for="Input.State" class="form-label"></label>
						<span asp-validation-for="Input.State" class="text-danger"></span>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-md-6 mb-3">
					<div class="form-floating">
						<input asp-for="Input.StreetAddress" class="form-control" placeholder="Please enter your StreetAddress." />
						<label asp-for="Input.StreetAddress" class="form-label"></label>
						<span asp-validation-for="Input.StreetAddress" class="text-danger"></span>
					</div>
				</div>
				<div class="col-md-6 mb-3">
					<div class="form-floating">
						<input asp-for="Input.ZipCode" class="form-control" placeholder="Please enter your ZipCode." />
						<label asp-for="Input.ZipCode" class="form-label"></label>
						<span asp-validation-for="Input.ZipCode" class="text-danger"></span>
					</div>
				</div>
			</div>

			<button id="update-profile-button" type="submit" class="w-100 btn btn-lg btn-primary mb-3">Save</button>

		</div>

		<div class="col-md-6">
			<div asp-validation-summary="ModelOnly" class="text-danger"></div>
			<div class="form-group">
				@* <label asp-for="Input.ProfilePic" style="width: 100%; "></label> *@
				@{
					string ProductimageSrc = @Model.Input.ProfilePic != null
					? $"data:image/*;base64,{Convert.ToBase64String(@Model.Input.ProfilePic)}"
					: Url.Content("~/images/Default_img.png");
				}
				<img id="ProfilePicture" alt="profile" src=@ProductimageSrc style="width:471px;height:471px" class=" rounded img-fluid catlogo card-img avatar" />

				<div class="mb-3 mt-2">
					<input type="file"
						   accept="image/*"
						   asp-for="Input.ProfilePic"
						   class="form-control"
						   onchange="document.getElementById('profilePicture').src = window.URL.createObjectURL(this.files[0])" />
					<span asp-validation-for="Input.ProfilePic" class="text-danger"></span>
				</div>

			</div>
		</div>

	</div>
</form>
@section Scripts {
	<partial name="_ValidationScriptsPartial" />
}
